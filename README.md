# 第一次实验报告 #

虽然没有要求写实验报告，但是在做第一次实验的时候确实遇到了一些问题，有了一些新的想法，于是就自己稍微写一下。

## 遇到的问题及解决办法 ##

本人是重度vscode党，没怎么用过也不会用IJ，目前采用的是wsl+vscode来完成作业。
目前遇到的一些特色bug：

- 编写时需要在*Main.java*和*SysYLexer.java* 文件引用处加上 *"package src"* ,否则在写的时候vscode无法识别出我的 *SysyLexer* 。
- 但在编译的时候，需要将刚刚的 *"package src"* 删掉，否则会提示说该package不存在等等报错，我怀疑是vscode的问题。
- 当文件夹某个位置新增一个g4文件，此时我会自动在该目录生成一个 *.antlr* 文件夹，导致之后在编译时会出现 *duplicate class* 错误，需要自己手动将该文件夹删除。
- makefile有点逆天，帮我删完文件后没有commit,于是我自己改了一下submit命令。
- 我发现在 *getAllTokens* 的行为有点奇怪。当我直接输入 *sysYLexer.getAllTokens()*，表现行为如下：若词法分析中检测到错误，则输出报错；若未检测到错误，则什么都不输出，并直接终止。这导致我对于正常的词法无法读出，对于有异常的词法可以，于是我得到了400分。
- 但是问题又来了：当我尝试去遍历token时，若程序有错，它确实会打印错误信息；但是却连带着词法信息也打印出来了，于是我得到了2300分。为了解决这个问题，我试着寻找内置的监听器和lexer的一些接口，能在我打印错误信息的同时传一些参，让我终止后续的信息打印。但遗憾的是我并没有找到。于是我就直接在main函数里对监听器进行一个匿名的写，这样子直接穿给main函数的一个布尔值，就可以解决这个问题了。

## 总结 ##

实验报告快写完的时候，我才得知不用写......算了，就这样吧。总结一下用时较久的几个地方：

- 了解g4文件的写法
- 处理环境问题
- 处理错误信息监听
